### 创建库
+ bash shell允许创建函数库文件，然后在多个脚本中引用该库文件；以下为实现创建库的步骤：
#### 第一步：创建一个包含脚本中所需函数的公共库文件，这里叫做myfuncs的库文件
```
function addem{
       echo $[ $1 + $2 ]
}
function multem{
       echo $[ $1 * $2 ]
}
function divem{
       if [ $2 -ne 0 ]
       then
              echo $[ $1 / $2 ]
       else
              echo -1
       fi
}
```
#### 第二步
+ 在用这些函数的脚本文件中包含myfuncs库文件，shell函数仅在定义它的shell会话内有效，如果你在shell命令行界面的提示符下运行myfuncs脚本，shell会创建一个新的shell并在其中运行该脚本，它会为那个新的shell定义这三个函数，但当你运行另外一个要用到这些函数的脚本时，他们是无法使用的；使用函数库的关键在于`source`命令，source命令会在当前shell上下文中执行命令，而不是创建一个新shell，可以用source命令来在shell脚本中运行库文件脚本，这样脚本就可以使用库中的函数了；source命令有个快捷键别名，称作点操作符，要在shell脚本中运行myfuncs库文件，只需要在使用库脚本文件的文件中添加：`. ./myfuncs`；这个例子嘉定myfuncs库文件是和shell脚本位于同一个目录，如果不是，你需要使用相应路径访问该文件；使用myfuncs库文件的脚本例子如下：该脚本成功的使用myfuncs库文件中定义的函数；
```
../myfuncs
value=10
value1=4
result=$(addem $value $value1)
```

### 在命令行上使用函数
+ 在shell脚本中将脚本函数当命令使用一样，在命令行界面也可以这样做，一旦在shell中定义了函数，你就可以在整个系统中使用它了，无需担心脚本是不是在PATH环境变量里，重点在于让shell能识别这些函数；
#### 在命令行上创建函数
+ 因为shell会解释用户输入的命令，所有可以在命令行上直接定义一个函数，有两种方法：第一种方法 ：采用单行方式定义函数：`function divem { echo $[ $1 / $2 ]；}`；就可以使用了：`divem 100 4`；当在命令行上定义函数时，必须在每个命令后面加上分号，这样shell才会知道在哪里是命令的起止；第二种方法：采用多行方式来定义函数：在定义时，bash shell会使用次提示符来提示输入更多的命令，用这种方法，不用再每条命令的末尾放一个分号，只要按下回车键就行；
```
function multem{
       echo $[ $1 * $2 ]
}
```
+ 这样就可以使用了：`multem 10 20`；在函数的末尾部分花括号，shell会知道你已经完成了函数的定义；命令行上创建函数时要特别小心，如果你给函数起了个跟内建命令或者另一个命令相同的名字，函数将覆盖原来的命令；
#### 在`.bashrc`文件中定义函数
+ 一个简单的方法时将函数定义在一个特定的位置，这个位置在每次启动一个新shell的时候，都会由shell重新载入，最佳的地点就是.bashrc文件，bash shell在每次启动时都会在主目录下查找这个文件，不管是交互式shell还是从现在shell中启动新的shell；
#### 直接定义函数
+ 可以直接在主目录下的.bashrc文件中定义函数，那你写的函数放在该文件的末尾就行了，这样该函数会在下次启动新bash shell时生效，随后你就能在系统的任意地方使用该函数了；
#### 读取函数文件
+ 只要是在shell脚本中，都可以使用source命令（或者他的别名点操作符）将库文件中的函数添加在你的.bashrc脚本中;在.bashrc脚本中添加：`. /home/ningbaoqi/mylib`；要保证库文件的路径名正确，以便bash shell能够找到该文件，下次启动shell时，库中的所有函数都能在命令行界面下使用； shell还会将定义好的函数传给子shell进程，这样一来这些函数就自动能够用于该shell会话中的任何脚本；

### 实例
+ 可以下载大量各式各样的函数，并将其用于自己的应用程序中，shtool库提供了一些简单的shell脚本函数，可以用来完成日常的shell功能，如：处理临时文件和目录或者格式化输出显示；
#### 下载及安装
+ 首先将FNU shtool库下载并安装到你的系统中，这样才能子shell脚本中使用这些库文件shtool下载地址：`ftp://ftp.gnu.org/gnu/shtool/shtool-2.0.8.tar.gz`；将文件shtool-2.0.8.tar.gz下载到下载目录中，然后你可以使用命令行工具cp或者Linux发行版中的图形文件管理器将文件复制到主目录中，完成复制操作后，使用tar命令提取文件：`tar -zxvf shtool-2.0.8.tar.gz`，该命令会将打包文件中的内容提取到shtool-2.0.8目录中；
#### 构建库
+ shtool文件必须针对指定的Linux环境进行配置，配置工作必须使用标准的configure和make命令，这两个命令常用于C编译环境，要构件库文件只要输入：`./configure ；make`；configure命令会检查构建shtool库文件所必须的软件，一旦发现了所需的工具。它会使用工具路径修改配置文件；make命令负责构建shtool库文件，最终的结果是一个完整的库软件包；也可以使用make命令测试这个库文件：`make test`：测试模式会测试shtool库中所有的函数，如果全部通过测试，就可以将库安装到Linux系统中的公共位置，这样所有的脚本就能使用这个库了，要完成安装，需要使用make命令的install选项，不过需要root权限执行该命令，安装完成就可以使用这些函数了；
#### shtool库函数

|函数|描述|
|------|------|
|`Arx `|   创建归档文件（包括一些扩展功能）|
|`Echo  `|  显示字符串，并提供了一些扩展构件|
|`fixperm`   | 改变目录树中的文件权限|
|`install ` | 安装脚本或文件|
|`mdate  `| 显示文件或目录的修改时间|
|`Mkin` |   使用相对路径创建链接|
|`mkshadow `|   创建一颗阴影树|
|`move`  |  带有替换功能的文件移动|
|`Path ` |  处理程序路径|
|`platform ` |  显示平台标识|
|`Prop` |   显示一个带有动画效果的进度条|
|`rotate  ` | 转置日志文件|
|`Scpp`    |共享的C预处理器|
|`Slo `  |根据库的类别，分离链接器选项|
|`Subst`  |  使用sed的替换操作|
|`Table `|   以表格的形式显示由字段分隔的数据|
|`tarball`  |  从文件和目录中创建tar文件|
|`version ` |  创建版本信息文件|
|`mkdir`  |  创建一个或更多目录|

+ shtool函数的使用格式：`shtool [options] [function [options] [args]]`；
### 使用库
+ 可以在命令行或脚本中使用shtool函数；使用platform：`shtool platform`；使用prop：它可以使用`\、|、/和-`字符创建一个旋转的进度条；`ls -al /user/bin |shtool prop -p "waiting......"`；
